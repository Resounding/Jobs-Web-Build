define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("resources/services/config",["require","exports"],function(e,t){"use strict";var n=function(){function e(){this.app_database_name="LangendoenJobs",this.app_root="resources/views/app",this.login_root="resources/views/login",this.remote_server="https://resounding.cloudant.com",this.remote_database_name=e.isDebug()?this.remote_server+"/langendoen-test":this.remote_server+"/langendoen"}return e.isDebug=function(){return"localhost"===window.location.hostname},e}();t.Configuration=n}),define("resources/services/log",["require","exports","aurelia-framework"],function(e,t,n){"use strict";t.log=n.LogManager.getLogger("jobsweb")});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/auth",["require","exports","aurelia-framework","aurelia-event-aggregator","aurelia-router","aurelia-fetch-client","./config","./log"],function(e,t,n,o,i,r,s,a){"use strict";var c="auth_token",l=null,d=null,u=function(){function e(e,t,n,o,i){this.app=e,this.config=t,this.router=n,this.httpClient=o,this.events=i,l=new PouchDB(this.config.remote_database_name,{skip_setup:!0}),d=JSON.parse(localStorage[c]||null)}return e.prototype.login=function(t,n){var o=this;return new Promise(function(i,r){var s=o.config.remote_server+"/_session",l="name="+encodeURI(t)+"&password="+encodeURI(n),u="Basic "+window.btoa(t+n);o.httpClient.fetch(s,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:u},method:"post",body:l}).then(function(t){t.ok?(a.log.debug("Login succeeded"),t.json().then(function(t){return d={name:t.name,password:n,roles:t.roles,basicAuth:u},localStorage[c]=JSON.stringify(d),o.app.setRoot(o.config.app_root),o.events.publish(e.AuthenticatedEvent),i(d)})):(a.log.debug("Login failed"),t.json().then(function(e){r(new Error("Login failed: "+e.reason))}))}).catch(r)})},e.prototype.logout=function(){return d=null,localStorage[c]=null,this.app.setRoot(this.config.login_root),this.router.navigateToRoute("login"),Promise.resolve()},e.prototype.isAuthenticated=function(){return null!==d},e.prototype.isInRole=function(e){return this.isAuthenticated()&&d.roles.indexOf(e)!==-1},e.prototype.userInfo=function(){return d},e.isLoggedIn=function(){return null!==d},e.AuthenticatedEvent="authenticated",e=__decorate([n.autoinject(),__metadata("design:paramtypes",[n.Aurelia,s.Configuration,i.Router,r.HttpClient,o.EventAggregator])],e)}();t.Authentication=u;var p=function(){function e(){}return e.prototype.run=function(e,t){if(e.getAllInstructions().some(function(e){return e.config.auth})){var n=u.isLoggedIn();if(!n)return t.cancel(new i.Redirect("login"))}return t()},e}();t.AuthorizeStep=p;var f=function(){function e(){}return e.Foreman="foreman",e.Administrator="administrator",e.Owner="owner",e.OfficeAdmin="office_admin",e}();t.Roles=f}),define("main",["require","exports","./resources/services/auth","./resources/services/config"],function(e,t,n,o){"use strict";function i(e){return e.use.standardConfiguration().feature("resources").plugin("aurelia-dialog",function(e){e.useDefaults(),e.settings.lock=!0}),o.Configuration.isDebug()&&e.use.developmentLogging(),e.start().then(function(){var t=e.container.get(n.Authentication),i=e.container.get(o.Configuration),r=t.isAuthenticated()?i.app_root:i.login_root;return e.setRoot(r)})}Promise.config({warnings:{wForgottenReturn:!1}}),t.configure=i}),define("resources/index",["require","exports"],function(e,t){"use strict";function n(e){}t.configure=n}),define("resources/models/billing-type",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.TIME_AND_MATERIALS="t+m",e.FIXED_CONTRACT="time",e.OPTIONS=[{id:e.TIME_AND_MATERIALS,name:"Time and Materials"},{id:e.FIXED_CONTRACT,name:"Fixed/Contract"}],e}();t.BillingType=n}),define("resources/models/customer",["require","exports"],function(e,t){"use strict";var n=function(){function e(e){e&&_.extend(this,e)}return e.prototype.toJSON=function(){return{_id:this._id,_rev:this._rev,type:e.DOCUMENT_TYPE,name:this.name,address:this.address,city:this.city,province:this.province,postal_code:this.postal_code,contact:this.contact,phone:this.phone}},e.createId=function(t){return e.DOCUMENT_TYPE+":"+t.toLowerCase().replace(" ","-")},e.DOCUMENT_TYPE="customer",e}();t.CustomerDocument=n}),define("resources/models/foreman",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.OPTIONS=["Barry","Bruce","Dan","Kurt","Phil"],e}();t.Foreman=n}),define("resources/models/job-status",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.PENDING="pending",e.IN_PROGRESS="inprogress",e.COMPLETE="complete",e.CLOSED="closed",e.OPTIONS=[{id:e.PENDING,name:"Pending",cssClass:"hourglass start inverted blue"},{id:e.IN_PROGRESS,name:"In Progress",cssClass:"hourglass half inverted green"},{id:e.COMPLETE,name:"Complete",cssClass:"hourglass end"},{id:e.CLOSED,name:"Closed",cssClass:""}],e}();t.JobStatus=n}),define("resources/models/job-type",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.PROJECT="project",e.SERVICE_CALL="service",e.OPTIONS=[{id:e.PROJECT,name:"Project"},{id:e.SERVICE_CALL,name:"Service Call"}],e}();t.JobType=n}),define("resources/models/job",["require","exports","./job-status","./job-type"],function(e,t,n,o){"use strict";var i=function(){function e(e){this._id=null,this.job_type=o.JobType.SERVICE_CALL,this.number=null,this.name="",this.customer=null,this.status=n.JobStatus.PENDING,this.description="",this.days=1,this.startDate=null,this.endDate=null,this.notes="",this.deleted=!1,e&&_.extend(this,e)}return Object.defineProperty(e.prototype,"isMultiDay",{get:function(){return!(!_.isDate(this.startDate)||!_.isDate(this.endDate))&&!moment(this.startDate).isSame(this.endDate,"day")},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{_id:this._id,job_type:this.job_type,number:this.number,name:this.name,customer:this.customer,status:this.status,description:this.description,billing_type:this.billing_type,work_type:this.work_type,isMultiDay:this.isMultiDay,days:this.days,startDate:this.startDate,endDate:this.endDate,foreman:this.foreman,notes:this.notes,manHours:this.manHours,deleted:this.deleted,type:e.DOCUMENT_TYPE,_rev:this._rev}},e.DOCUMENT_TYPE="job",e}();t.JobDocument=i}),define("resources/models/work-type",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.MATERIALS_AND_INSTALL="m+i",e.INSTALL_ONLY="install",e.MATERIALS_ONLY="materials",e.OPTIONS=[{id:e.MATERIALS_AND_INSTALL,name:"Materials + Install"},{id:e.INSTALL_ONLY,name:"Install Only"},{id:e.MATERIALS_ONLY,name:"Materials Only"}],e}();t.WorkType=n});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/data/db",["require","exports","aurelia-event-aggregator","aurelia-framework","../../models/job","../config","../log","../auth"],function(e,t,n,o,i,r,s,a){"use strict";var c=null,l=function(){function e(e,t,n){this.auth=e,this.config=t,this.events=n,this.init(),this.events.subscribe(a.Authentication.AuthenticatedEvent,this.init.bind(this))}return e.prototype.init=function(t,n){var o=this;if(null===c&&(c=t?new PouchDB(this.config.app_database_name,t):new PouchDB(this.config.app_database_name),c.getIndexes().then(function(e){var t=_.pluck(e.indexes,"name");t.indexOf("by_type_name")===-1&&c.createIndex({name:"by_type_name",index:{fields:["type","name"],sort:["name"]}}).then(function(e){s.log.debug(e)}).catch(function(e){s.log.error(e)}),t.indexOf("by_type_deleted")===-1&&c.createIndex({name:"by_type_deleted",index:{fields:["type","deleted"]}}).then(function(e){s.log.debug(e)}).catch(function(e){s.log.error(e)})})),this.auth.isAuthenticated()){var r=this.auth.userInfo(),a=({Authorization:r.basicAuth},{skip_setup:!0,auth:{username:r.name,password:r.password}});n&&_.extend(a,n);var l=new PouchDB(this.config.remote_database_name,a),d=c.sync(l,{live:!0}).on("complete",function(){s.log.debug("Sync complete")}).on("error",function(e){s.log.error("Sync error"),s.log.error(e);var t=_.values(e);if(t.indexOf("web_sql_went_bad")!==-1){try{d.cancel()}catch(e){}c=null;var n={adapter:"localstorage"};o.init(n)}else if(t.indexOf("_reader access is required for this request")!==-1){try{d.cancel()}catch(e){}c=null;var n={skip_setup:!0,auth:{username:"servaryinallyzeaccedicie",password:"f2062820500e00f931c25f848928023cc1b427cc"}};o.init(void 0,n)}}).on("change",function(t){s.log.info("Sync change"),s.log.debug(t),"pull"===t.direction&&_.isArray(t.change.docs)&&t.change.docs.forEach(function(t){if(t.type===i.JobDocument.DOCUMENT_TYPE){var n=new i.JobDocument(t);o.events.publish(e.SyncChangeEvent,n)}})}).on("paused",function(e){s.log.info("Sync pause"),s.log.debug(e)}).on("active",function(e){s.log.info("Sync active"),s.log.debug(e)})}},e.prototype.destroy=function(){return c.destroy().then(this.init.bind(this))},e.prototype.nextJobNumber=function(){return new Promise(function(e,t){c.find({selector:{type:i.JobDocument.DOCUMENT_TYPE},fields:["number"]}).then(function(t){s.log.debug(t);var n=t.docs.reduce(function(e,t){var n=parseInt(t.number);return!isNaN(n)&&n>e&&(e=n),e},0)+1,o=n<99999?("0000"+n).slice(-5):n.toString();e(o)}).catch(t)})},Object.defineProperty(e.prototype,"db",{get:function(){return c},enumerable:!0,configurable:!0}),e.SyncChangeEvent="SyncChangeEvent",e=__decorate([o.autoinject(),__metadata("design:paramtypes",[a.Authentication,r.Configuration,n.EventAggregator])],e)}();t.Database=l});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/data/job-service",["require","exports","aurelia-framework","../log","./db","../auth","../../models/job"],function(e,t,n,o,i,r,s){"use strict";var a=function(){function e(e,t){this.auth=e,this.database=t,this.db=t.db}return e.prototype.getAll=function(){var e=this;return new Promise(function(t,n){e.db.find({selector:{type:s.JobDocument.DOCUMENT_TYPE,deleted:{$ne:!0}}}).then(function(e){var n=e.docs.map(function(e){var t=new s.JobDocument(e);return _.isString(e.startDate)&&(t.startDate=moment(e.startDate).toDate()),_.isString(e.endDate)&&(t.endDate=moment(e.endDate).toDate()),t});t(n)}).catch(n)})},e.prototype.getOne=function(e){var t=this;return new Promise(function(n,i){t.db.get(e).then(function(e){o.log.info(e);var t=new s.JobDocument(e);_.isString(e.startDate)&&(t.startDate=moment(e.startDate).toDate()),_.isString(e.endDate)&&(t.endDate=moment(e.endDate).toDate()),n(t)}).catch(i)})},e.prototype.save=function(e){var t=this;return new Promise(function(n,o){return e._id?t.db.put(e).then(n).catch(o):void t.database.nextJobNumber().then(function(i){return e._id="job:"+i,e.number=i,t.auth.isInRole(r.Roles.Foreman)&&(e.foreman=t.auth.userInfo().name),t.db.put(e).then(n).catch(o)})})},e.prototype.delete=function(e){return e.deleted=!0,this.db.put(e)},e.prototype.destroy=function(){return this.database.destroy()},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[r.Authentication,i.Database])],e)}();t.JobService=a});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/csv-export",["require","exports","aurelia-framework","papaparse","./data/job-service","../models/job-type"],function(e,t,n,o,i,r){"use strict";var s=function(){function e(e){this.jobsService=e}return e.prototype.export=function(){var e=this;return new Promise(function(t,n){var i={fields:["Number","Name","Customer","Status","Foreman","Description","Notes","Start Date","End Date"],data:[]};e.jobsService.getAll().then(function(e){i.data=e.map(function(e){var t=e.number<99999?("0000"+e.number).slice(-5):e.number.toString(),n=e.job_type===r.JobType.SERVICE_CALL?"S":"P",o=moment(e.startDate),i=moment(e.endDate),s=e.startDate&&o.isValid()?o.format("YYYY-MM-DD"):"",a=e.endDate&&i.isValid()?i.format("YYYY-MM-DD"):"";return[n+"-"+t,e.name,e.customer.name,e.status,e.foreman,e.description,e.notes,s,a]});var n=o.unparse(i);t(n)}).catch(n)})},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[i.JobService])],e)}();t.CsvExport=s}),define("resources/services/notifications",["require","exports"],function(e,t){"use strict";toastr.options.positionClass="toast-bottom-left";var n=function(){function e(){}return e.success=function(e){toastr.success(e)},e.error=function(e){toastr.error(JSON.stringify(e))},e}();t.Notifications=n}),define("resources/services/utils",["require","exports"],function(e,t){"use strict";function n(){if("undefined"==typeof o){var e=$('<div class="hide-mobile"></div>');e.appendTo(document.documentElement),o=!e.is(":visible"),e.remove()}return o}var o=void 0;t.isDevice=n}),define("resources/views/app",["require","exports","../services/auth"],function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.configureRouter=function(e,t){e.addPipelineStep("authorize",n.AuthorizeStep),e.title="Langendoen Mechanical Job Management Application",e.map([{route:["","jobs"],name:"jobs.list",moduleId:"resources/views/jobs/list",title:"Jobs List",nav:!0,auth:!0,settings:{icon:"browser"}},{route:"jobs/new",name:"jobs.new",moduleId:"resources/views/jobs/detail",title:"New Job",nav:!0,auth:!0,settings:{icon:"plus"}},{route:"jobs/:id",name:"jobs.edit",moduleId:"resources/views/jobs/detail",title:"Edit Job",auth:!0},{route:"customers",name:"customers.list",moduleId:"resources/views/customers/list",title:"Customer List",nav:!0,auth:!0,settings:{icon:"building outline",hideMobile:!0}}]),this.router=t},e}();t.App=o});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/login",["require","exports","aurelia-framework","../services/auth"],function(e,t,n,o){"use strict";var i=function(){function e(e){this.auth=e}return e.prototype.login=function(){var e=this;this.errorMessage="",this.password||(this.errorMessage="Please enter your password"),this.username||(this.errorMessage="Please enter your username"),this.errorMessage||this.auth.login(this.username,this.password).catch(function(t){e.errorMessage=t.message})},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.Authentication])],e)}();t.Login=i});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/data/activities-service",["require","exports","aurelia-framework","./db"],function(e,t,n,o){"use strict";var i=function(){function e(e){this.db=e.db}return e.prototype.getAll=function(){var e=this;return new Promise(function(t,n){e.db.get("activities").then(function(e){t(e.items)}).catch(function(o){if(404===o.status){var i={_id:"activities",items:[]};e.db.put(i).then(function(){return t([])}).catch(n)}else n(o)})})},e.prototype.create=function(e){var t=this;return new Promise(function(n,o){t.db.get("activities").then(function(n){return n.items.push(e),t.db.put(n)}).catch(function(n){if(404===n.status){var i={_id:"activities",items:[e]};return t.db.put(i)}o(n)})})},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.Database])],e)}();t.ActivitiesService=i});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/services/data/customer-service",["require","exports","aurelia-framework","./db","../../models/customer"],function(e,t,n,o,i){"use strict";var r=function(){function e(e){this.db=e.db}return e.prototype.getAll=function(){var e=this;return new Promise(function(t,n){e.db.find({selector:{type:i.CustomerDocument.DOCUMENT_TYPE},sort:["type","name"]}).then(function(e){var n=e.docs.map(function(e){var t=new i.CustomerDocument(e);return t});t(n)}).catch(n)})},e.prototype.create=function(e){var t=this;return e._id||(e._id=i.CustomerDocument.createId(e.name)),new Promise(function(n,o){return t.db.put(e).then(function(e){t.db.get(e.id).then(function(e){var t=new i.CustomerDocument(e);n(t)}).catch(o)}).catch(o)})},e.prototype.save=function(e){var t=this;return new Promise(function(n,o){return e._id?t.db.put(e).then(n).catch(o):t.create(e)})},e.prototype.delete=function(e){var t=this;return new Promise(function(n,o){t.db.remove(e).then(n).catch(o)})},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.Database])],e)}();t.CustomerService=r}),define("resources/views/controls/integer-value-converter",["require","exports"],function(e,t){"use strict";var n=function(){function e(){}return e.prototype.fromView=function(e){var t=parseInt(e);return isNaN(t)&&(t=0),t},e.prototype.toView=function(e){var t="";return _.isNumber(e)&&(t=e.toString()),t},e}();t.IntegerValueConverter=n});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/controls/nav-bar",["require","exports","aurelia-framework","aurelia-router","../../services/auth","../../services/csv-export"],function(e,t,n,o,i,r){"use strict";var s=function(){function e(e,t,n){this.element=e,this.auth=t,this.csvExport=n}return e.prototype.attached=function(){$(".dropdown",this.element).dropdown()},e.prototype.detached=function(){$(".dropdown",this.element).dropdown("destroy")},e.prototype.downloadCsv=function(){this.csvExport.export().then(function(e){var t=encodeURIComponent(e),n="data:text/csv;charset=utf-8, "+t,o=document.createElement("a");o.download="jobs.csv",o.href=n,o.click()})},e.prototype.logout=function(){this.auth.logout()},Object.defineProperty(e.prototype,"userName",{get:function(){return(this.auth.userInfo()||{}).name},enumerable:!0,configurable:!0}),__decorate([n.bindable,__metadata("design:type",o.Router)],e.prototype,"router",void 0),e=__decorate([n.autoinject(),__metadata("design:paramtypes",[Element,i.Authentication,r.CsvExport])],e)}();t.NavBar=s});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/controls/prompt",["require","exports","aurelia-framework","aurelia-dialog"],function(e,t,n,o){"use strict";var i=function(){function e(e){this.controller=e}return e.prototype.activate=function(e){this.message=e},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.DialogController])],e)}();t.Prompt=i});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/customers/edit",["require","exports","aurelia-framework","aurelia-dialog"],function(e,t,n,o){"use strict";var i=function(){function e(e){this.controller=e,this.errors=!1}return e.prototype.activate=function(e){this.customer=_.clone(e)},e.prototype.save=function(){this.errors=!1,this.customer.name||(this.errors=!0),this.controller.ok(this.customer)},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[o.DialogController])],e)}();t.EditCustomer=i});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/customers/list",["require","exports","aurelia-framework","aurelia-binding","aurelia-dialog","../controls/prompt","./edit","../../services/data/customer-service","../../services/notifications"],function(e,t,n,o,i,r,s,a,c){"use strict";var l=function(){function e(e,t){this.customerService=e,this.dialogService=t,this.search=""}return e.prototype.refresh=function(){var e=this;this.customerService.getAll().then(function(t){e.allCustomers=t}).catch(c.Notifications.error)},e.prototype.attached=function(){this.refresh()},Object.defineProperty(e.prototype,"customers",{get:function(){var e=this;return this.search?this.allCustomers.filter(function(t){return t.name.toLowerCase().indexOf(e.search.toLowerCase())!==-1}):this.allCustomers},enumerable:!0,configurable:!0}),e.prototype.delete=function(e){var t=this;this.dialogService.open({viewModel:r.Prompt,model:"Are you sure you want to delete this Customer?"}).then(function(n){n.wasCancelled||t.customerService.delete(e).then(function(){c.Notifications.success("Customer deleted successfully"),t.refresh()}).catch(c.Notifications.error)})},e.prototype.edit=function(e){var t=this;this.dialogService.open({viewModel:s.EditCustomer,model:e}).then(function(e){e.wasCancelled||t.customerService.save(e.output).then(function(){c.Notifications.success("Customer saved successfully"),t.refresh()}).catch(c.Notifications.error)})},__decorate([o.computedFrom("search","allCustomers"),__metadata("design:type",Object)],e.prototype,"customers",null),e=__decorate([n.autoinject(),__metadata("design:paramtypes",[a.CustomerService,i.DialogService])],e)}();t.CustomerList=l});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/jobs/close-job",["require","exports","aurelia-framework"],function(e,t,n){"use strict";var o=function(){function e(){}return e.ShowModalEvent="show-close-job",e.ModalApprovedEvent="close-job-approved",e}();t.CloseJobArgs=o;var i=function(){function e(){}return __decorate([n.bindable,__metadata("design:type",o)],e.prototype,"args",void 0),e}();t.CloseJob=i});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/jobs/detail",["require","exports","aurelia-framework","aurelia-router","aurelia-dialog","../controls/prompt","../../services/data/job-service","../../services/data/customer-service","../../services/notifications","../../models/job","../../models/customer","../../models/job-type","../../models/job-status","../../models/billing-type","../../models/work-type","../../services/auth"],function(e,t,n,o,i,r,s,a,c,l,d,u,p,f,h,m){"use strict";var b=function(){function e(e,t,n,o,i,r){var s=this;this.element=e,this.router=t,this.jobService=n,this.customerService=o,this.dialogService=r,this.jobTypes=u.JobType.OPTIONS,this.jobStatuses=p.JobStatus.OPTIONS,this.billingTypes=f.BillingType.OPTIONS,this.workTypes=h.WorkType.OPTIONS,this.isFollowup=!1,this.canEditManHours=!1,this.canEditManHours=i.isInRole(m.Roles.OfficeAdmin),this.customerServicePromise=o.getAll().then(function(e){return s.customers=e}).catch(c.Notifications.error)}return e.prototype.activate=function(e,t){var n=this;this.routeConfig=t,this.customerServicePromise.then(function(){var t=e.id;_.isUndefined(t)?(n.job=new l.JobDocument,_.isString(e.type)&&(n.job.type=e.type),e.from&&n.jobService.getOne(e.from).then(function(e){n.isFollowup=!0,n.job.customer=e.customer})):n.jobService.getOne(t).then(function(e){n.job=e,_.isDate(e.startDate)&&$(".calendar.start",n.element).calendar("set date",e.startDate),_.isDate(e.endDate)&&$(".calendar.end",n.element).calendar("set date",e.endDate),e.customer&&($(".customer",n.element).dropdown("set selected",e.customer.name),$(".customer",n.element).dropdown("set value",e.customer._id)),e.status&&($("#status",n.element).dropdown("set selected",e.status),$("#status",n.element).dropdown("set value",e.status))}).catch(function(e){c.Notifications.error(e),n.router.navigateToRoute("jobs.list")})})},e.prototype.attached=function(){var e=this;$(".dropdown.customer",this.element).dropdown({allowAdditions:!0,hideAdditions:!1,fullTextSearch:"exact",match:"text",onChange:function(t){e.job.customer=_.find(e.customers,function(e){return e._id===t}),e.job.customer||(e.job.customer=new d.CustomerDocument,e.job.customer.name=t)}}),$(".dropdown.basic.button",this.element).dropdown(),$("#status",this.element).dropdown(),$("#billingType",this.element).dropdown(),$("#workType",this.element).dropdown(),$(".calendar.start",this.element).calendar({type:"date",onChange:function(t){return e.job.startDate=moment(t).toDate()}}),$(".calendar.end",this.element).calendar({type:"date",onChange:function(t){return e.job.endDate=moment(t).toDate()}});var t=$(".button-bar",this.element);t.visibility({once:!1,onBottomPassed:function(){t.addClass("fixed top")},onBottomPassedReverse:function(){t.removeClass("fixed top")}})},e.prototype.detached=function(){$(".dropdown.activity",this.element).dropdown("destroy"),$("#status",this.element).dropdown("destroy"),$("#billingType",this.element).dropdown("destroy"),$("#workType",this.element).dropdown("destroy"),$(".calendar.start",this.element).calendar("destroy"),$(".calendar.end",this.element).calendar("destroy"),$(".button-bar",this.element).visibility("destroy"),$(".dropdown.basic.button",this.element).dropdown("destroy")},Object.defineProperty(e.prototype,"customer_id",{get:function(){return this.job&&this.job.customer?this.job.customer._id:null},set:function(e){var t=_.findWhere(this.customers,{_id:e});t&&(this.job.customer=t)},enumerable:!0,configurable:!0}),e.prototype.onIsMultiDayChange=function(){this.job.isMultiDay?$("#days",this.element).focus():this.job.days=null},e.prototype.onSaveClick=function(){var e=this;this.customer_id?this.saveJob():this.saveCustomer(this.job.customer).then(function(t){e.job.customer=t,e.saveJob()}).catch(c.Notifications.error)},e.prototype.onDeleteClick=function(){var e=this;this.dialogService.open({viewModel:r.Prompt,model:"Are you sure you want to delete this job?"}).then(function(t){t.wasCancelled||e.jobService.delete(e.job.toJSON()).then(function(){c.Notifications.success("Job Deleted"),e.router.navigateToRoute("jobs.list")}).catch(c.Notifications.error)})},e.prototype.saveJob=function(){var e=this;return this.jobService.save(this.job.toJSON()).then(function(){c.Notifications.success("Job Saved"),e.router.navigateToRoute("jobs.list")}).catch(function(e){c.Notifications.error(e)})},e.prototype.saveCustomer=function(e){return this.customerService.create(e.toJSON())},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[Element,o.Router,s.JobService,a.CustomerService,m.Authentication,i.DialogService])],e)}();t.EditJob=b});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/jobs/list-item",["require","exports","aurelia-framework","aurelia-event-aggregator","../../models/job-status","../../models/job-type","../../models/foreman","../../services/data/job-service","../../services/notifications","../../services/auth","./close-job"],function(e,t,n,o,i,r,s,a,c,l,d){
"use strict";var u=function(){function e(e,t,n,o){if(this.element=e,this.jobService=t,this.auth=n,this.events=o,this.expanded=!1,this.foremen=s.Foreman.OPTIONS,this.jobStatuses=i.JobStatus.OPTIONS,!this.auth.isInRole(l.Roles.OfficeAdmin)){var r=_.findIndex(this.jobStatuses,function(e){return e.id===i.JobStatus.CLOSED});r!==-1&&this.jobStatuses.splice(r,1)}}return e.prototype.attached=function(){this.jobManHoursSubscription=this.events.subscribe(d.CloseJobArgs.ModalApprovedEvent,this.onJobManHoursChanged.bind(this)),$(".dropdown.status",this.element).dropdown({onChange:this.onStatusChanged.bind(this)}),$(".dropdown.foreman",this.element).dropdown({onChange:this.onForemanChanged.bind(this)})},e.prototype.detached=function(){$(".dropdown.status",this.element).dropdown("destroy"),$(".dropdown.foreman",this.element).dropdown("destroy")},e.prototype.toggleExpanded=function(){this.expanded=!this.expanded},Object.defineProperty(e.prototype,"startDateDisplay",{get:function(){var e="Not Scheduled";return this.job.startDate&&(e=moment(this.job.startDate).format("ddd, MMM Do")),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDateDisplay",{get:function(){var e="";return this.job.endDate&&(e=moment(this.job.endDate).format("ddd, MMM Do")),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jobStatus",{get:function(){var e=this;return _.find(this.jobStatuses,function(t){return t.id==e.job.status})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"foremanDisplay",{get:function(){return this.job.foreman||"Unassigned"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return"pending"===this.job.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.job.status===i.JobStatus.PENDING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this.job.status===i.JobStatus.COMPLETE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.job.status===i.JobStatus.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProject",{get:function(){return this.job.job_type===r.JobType.PROJECT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isServiceCall",{get:function(){return this.job.job_type===r.JobType.SERVICE_CALL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jobNumberDisplay",{get:function(){var e=this.job.job_type===r.JobType.SERVICE_CALL?"S":"P";return e+"-"+this.job.number},enumerable:!0,configurable:!0}),e.prototype.onStatusChanged=function(e){var t=this;this.job.status=e,this.save("Status").then(function(){e===i.JobStatus.CLOSED&&t.events.publish(d.CloseJobArgs.ShowModalEvent,t.job._id)})},e.prototype.onForemanChanged=function(e){this.job.foreman=e,this.save("Foreman")},e.prototype.onJobManHoursChanged=function(e){e.jobId===this.job._id&&(this.job.manHours=parseInt(e.manHours)||0,this.save("Status"))},e.prototype.save=function(e){var t=this;return this.jobService.save(this.job).then(function(n){t.job._rev=n.rev,c.Notifications.success(e+" updated")}).catch(c.Notifications.error)},__decorate([n.bindable,__metadata("design:type",Object)],e.prototype,"job",void 0),e=__decorate([n.autoinject(),__metadata("design:paramtypes",[Element,a.JobService,l.Authentication,o.EventAggregator])],e)}();t.ListItem=u});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/jobs/list",["require","exports","aurelia-framework","aurelia-event-aggregator","../../services/auth","../../services/log","../../services/data/db","../../models/job-type","../../models/job-status","../../services/data/job-service","./close-job"],function(e,t,n,o,i,r,s,a,c,l,d){"use strict";var u=function(){function e(e,t,n,o){this.element=e,this.auth=t,this.jobService=n,this.events=o,this.myJobs=!1,this.showOpen=!0,this.showClosed=!1,this.showCompleted=!1,this.reverseSort=!1,this.customerSort=!1,this.showProjects=!0,this.showServiceCalls=!0,this.filtersExpanded=!1,this.closeJobArgs=new d.CloseJobArgs,this.showCompleted=t.isInRole(i.Roles.OfficeAdmin),this.showClosed=t.isInRole(i.Roles.OfficeAdmin)}return e.prototype.attached=function(){var e=this,t=this;$(".modal.close-job",this.element).modal({onApprove:function(){e.events.publish(d.CloseJobArgs.ModalApprovedEvent,t.closeJobArgs)}}),$(".ui.toggle.checkbox",this.element).checkbox({onChange:this.filter.bind(this)}),this.showModalSubscription=this.events.subscribe(d.CloseJobArgs.ShowModalEvent,this.showCloseJobModal.bind(this)),this.syncChangeSubscription=this.events.subscribe(s.Database.SyncChangeEvent,this.refresh.bind(this)),this.refresh()},e.prototype.detached=function(){$(".modal.close-job",this.element).modal("destroy"),this.showModalSubscription.dispose()},e.prototype.refresh=function(){var e=this;this.jobService.getAll().then(function(t){e.items=t,e.filter()})},e.prototype.filter=function(){var e=this,t=this.auth.userInfo().name,n=function(n){return!e.myJobs||n.foreman===t},o=function(t){return e.showOpen&&(t.status===c.JobStatus.PENDING||t.status===c.JobStatus.IN_PROGRESS)},i=function(t){return e.showCompleted&&t.status==c.JobStatus.COMPLETE},s=function(t){return e.showClosed&&t.status===c.JobStatus.CLOSED},l=function(t){return e.showProjects&&t.job_type==a.JobType.PROJECT},d=function(t){return e.showServiceCalls&&t.job_type==a.JobType.SERVICE_CALL};r.log.debug("Only show my jobs: "+this.myJobs),r.log.debug("Show open jobs: "+this.showOpen),r.log.debug("Show completed jobs: "+this.showCompleted),r.log.debug("Show closed jobs: "+this.showClosed),r.log.debug("Show projects: "+this.showProjects),r.log.debug("Show service calls: "+this.showServiceCalls);var u=_.filter(this.items,function(e){return n(e)&&(o(e)||s(e)||i(e))&&(l(e)||d(e))}),p=_.sortBy(u,function(t){return e.customerSort?(t.customer.name||"").toString().toLowerCase()+t.number:parseInt(t.number)});this.reverseSort&&p.reverse(),this.filteredItems=p},e.prototype.toggleFiltersExpanded=function(){this.filtersExpanded=!this.filtersExpanded},e.prototype.showCloseJobModal=function(e){this.closeJobArgs.jobId=e,this.closeJobArgs.manHours=null,$(".modal.close-job").modal("show")},Object.defineProperty(e.prototype,"isOwner",{get:function(){return this.auth.isInRole(i.Roles.Owner)},enumerable:!0,configurable:!0}),e=__decorate([n.autoinject(),__metadata("design:paramtypes",[Element,i.Authentication,l.JobService,o.EventAggregator])],e)}();t.JobList=u});var __decorate=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("resources/views/jobs/new",["require","exports","aurelia-framework","aurelia-router","../../services/data/job-service","../../services/data/customer-service","../../services/notifications","../../models/job","../../models/customer","../../models/job-type","../../models/job-status","../../models/billing-type","../../models/work-type"],function(e,t,n,o,i,r,s,a,c,l,d,u,p){"use strict";var f=function(){function e(e,t,n,o){var i=this;this.element=e,this.router=t,this.jobService=n,this.customerService=o,this.jobTypes=l.JobType.OPTIONS,this.jobStatuses=d.JobStatus.OPTIONS,this.billingTypes=u.BillingType.OPTIONS,this.workTypes=p.WorkType.OPTIONS,this.isFollowup=!1,this.job=new a.JobDocument,o.getAll().then(function(e){return i.customers=e}).catch(s.Notifications.error)}return e.prototype.activate=function(e,t){var n=this;t.title=this.title,_.isString(e.type)&&(this.job.type=e.type),e.from&&this.jobService.getOne(e.from).then(function(e){n.isFollowup=!0,n.job.customer=e.customer})},e.prototype.attached=function(){var e=this;$(".dropdown.customer",this.element).dropdown({allowAdditions:!0,hideAdditions:!1,fullTextSearch:!0,onChange:function(t){e.job.customer=_.find(e.customers,function(e){return e._id===t}),e.job.customer||(e.job.customer=new c.CustomerDocument,e.job.customer.name=t),console.log(e.job.customer)}}),$("#status",this.element).dropdown(),$("#billingType",this.element).dropdown(),$("#workType",this.element).dropdown(),$(".calendar.start",this.element).calendar({type:"date",onChange:function(t){return e.job.startDate=moment(t).toDate()}});var t=$(".button-bar",this.element);t.visibility({once:!1,onBottomPassed:function(){t.addClass("fixed top")},onBottomPassedReverse:function(){t.removeClass("fixed top")}})},e.prototype.detached=function(){$(".dropdown.customer",this.element).dropdown("destroy"),$("#status",this.element).dropdown("destroy"),$("#billingType",this.element).dropdown("destroy"),$("#workType",this.element).dropdown("destroy"),$(".calendar.start",this.element).calendar("destroy"),$(".button-bar",this.element).visibility("destroy")},Object.defineProperty(e.prototype,"title",{get:function(){return"New Job"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customer_id",{get:function(){return this.job.customer?this.job.customer._id:null},enumerable:!0,configurable:!0}),e.prototype.onIsMultiDayChange=function(){this.job.isMultiDay?$("#days",this.element).focus():this.job.days=null},e.prototype.onSaveClick=function(){var e=this;this.customer_id?this.saveJob().then(function(){return e.router.navigateToRoute("jobs.list")}):this.saveCustomer(this.job.customer).then(function(t){e.job.customer=t,e.saveJob().then(function(){return e.router.navigateToRoute("jobs.list")})}).catch(s.Notifications.error)},e.prototype.saveJob=function(){return this.jobService.save(this.job.toJSON()).then(function(){s.Notifications.success("Job Saved")}).catch(function(e){s.Notifications.error(e)})},e.prototype.saveCustomer=function(e){return this.customerService.create(e.toJSON())},e=__decorate([n.autoinject(),__metadata("design:paramtypes",[Element,o.Router,i.JobService,r.CustomerService])],e)}();t.NewJob=f}),define("aurelia-dialog/ai-dialog",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialog=void 0;var n,o,i;e.AiDialog=(n=(0,t.customElement)("ai-dialog"),o=(0,t.inlineView)("\n  <template>\n    <slot></slot>\n  </template>\n"),n(i=o(i=function(){})||i)||i)}),define("aurelia-dialog/ai-dialog-header",["exports","aurelia-templating","./dialog-controller"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogHeader=void 0;var o,i,r,s,a;e.AiDialogHeader=(o=(0,t.customElement)("ai-dialog-header"),i=(0,t.inlineView)('\n  <template>\n    <button type="button" class="dialog-close" aria-label="Close" if.bind="!controller.settings.lock" click.trigger="controller.cancel()">\n      <span aria-hidden="true">&times;</span>\n    </button>\n\n    <div class="dialog-header-content">\n      <slot></slot>\n    </div>\n  </template>\n'),o(r=i((a=s=function(e){this.controller=e},s.inject=[n.DialogController],r=a))||r)||r)}),define("aurelia-dialog/dialog-controller",["exports","./lifecycle","./dialog-result"],function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DialogController=void 0;e.DialogController=function(){function e(e,t,n,o){this.renderer=e,this.settings=t,this._resolve=n,this._reject=o}return e.prototype.ok=function(e){return this.close(!0,e)},e.prototype.cancel=function(e){return this.close(!1,e)},e.prototype.error=function(e){var n=this;return(0,t.invokeLifecycle)(this.viewModel,"deactivate").then(function(){return n.renderer.hideDialog(n)}).then(function(){n.controller.unbind(),n._reject(e)})},e.prototype.close=function(e,o){var i=this;return this._closePromise?this._closePromise:(this._closePromise=(0,t.invokeLifecycle)(this.viewModel,"canDeactivate").then(function(r){return r?(0,t.invokeLifecycle)(i.viewModel,"deactivate").then(function(){return i.renderer.hideDialog(i)}).then(function(){var t=new n.DialogResult(!e,o);return i.controller.unbind(),i._resolve(t),t}):void(i._closePromise=void 0)},function(e){return i._closePromise=void 0,Promise.reject(e)}),this._closePromise)},e}()}),define("aurelia-dialog/lifecycle",["exports"],function(e){"use strict";function t(e,t,n){if("function"==typeof e[t]){var o=e[t](n);return o instanceof Promise?o:null!==o&&void 0!==o?Promise.resolve(o):Promise.resolve(!0)}return Promise.resolve(!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.invokeLifecycle=t}),define("aurelia-dialog/dialog-result",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DialogResult=function(e,t){this.wasCancelled=!1,this.wasCancelled=e,this.output=t}}),define("aurelia-dialog/ai-dialog-body",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogBody=void 0;var n,o,i;e.AiDialogBody=(n=(0,t.customElement)("ai-dialog-body"),o=(0,t.inlineView)("\n  <template>\n    <slot></slot>\n  </template>\n"),n(i=o(i=function(){})||i)||i)}),define("aurelia-dialog/ai-dialog-footer",["exports","aurelia-templating","./dialog-controller"],function(e,t,n){"use strict";function o(e,t,n,o){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function i(e,t,n,o,i){var r={};return Object.keys(o).forEach(function(e){r[e]=o[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.AiDialogFooter=void 0;var r,s,a,c,l,d,u,p;e.AiDialogFooter=(r=(0,t.customElement)("ai-dialog-footer"),s=(0,t.inlineView)('\n  <template>\n    <slot></slot>\n\n    <template if.bind="buttons.length > 0">\n      <button type="button" class="btn btn-default" repeat.for="button of buttons" click.trigger="close(button)">${button}</button>\n    </template>\n  </template>\n'),r(a=s((p=u=function(){function e(e){o(this,"buttons",l,this),o(this,"useDefaultButtons",d,this),this.controller=e}return e.prototype.close=function(t){e.isCancelButton(t)?this.controller.cancel(t):this.controller.ok(t)},e.prototype.useDefaultButtonsChanged=function(e){e&&(this.buttons=["Cancel","Ok"])},e.isCancelButton=function(e){return"Cancel"===e},e}(),u.inject=[n.DialogController],c=p,l=i(c.prototype,"buttons",[t.bindable],{enumerable:!0,initializer:function(){return[]}}),d=i(c.prototype,"useDefaultButtons",[t.bindable],{enumerable:!0,initializer:function(){return!1}}),a=c))||a)||a)}),define("aurelia-dialog/attach-focus",["exports","aurelia-templating"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttachFocus=void 0;var n,o,i,r;e.AttachFocus=(n=(0,t.customAttribute)("attach-focus"),n((r=i=function(){function e(e){this.value=!0,this.element=e}return e.prototype.attached=function(){this.value&&"false"!==this.value&&this.element.focus()},e.prototype.valueChanged=function(e){this.value=e},e}(),i.inject=[Element],o=r))||o)}),define("aurelia-dialog/dialog-configuration",["exports","./renderer","./dialog-renderer","./dialog-options","aurelia-pal"],function(e,t,n,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DialogConfiguration=void 0;var r=n.DialogRenderer,s={"ai-dialog":"./ai-dialog","ai-dialog-header":"./ai-dialog-header","ai-dialog-body":"./ai-dialog-body","ai-dialog-footer":"./ai-dialog-footer","attach-focus":"./attach-focus"},a="ai-dialog-container,ai-dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0}ai-dialog-overlay{opacity:0}ai-dialog-overlay.active{opacity:1}ai-dialog-container{display:block;transition:opacity .2s linear;opacity:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}ai-dialog-container.active{opacity:1}ai-dialog-container>div{padding:30px}ai-dialog-container>div>div{display:block;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto}ai-dialog-container,ai-dialog-container>div,ai-dialog-container>div>div{outline:0}ai-dialog{display:table;box-shadow:0 5px 15px rgba(0,0,0,.5);border:1px solid rgba(0,0,0,.2);border-radius:5px;padding:3;min-width:300px;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border-image-source:initial;border-image-slice:initial;border-image-width:initial;border-image-outset:initial;border-image-repeat:initial;background:#fff}ai-dialog>ai-dialog-header{display:block;padding:16px;border-bottom:1px solid #e5e5e5}ai-dialog>ai-dialog-header>button{float:right;border:none;display:block;width:32px;height:32px;background:0 0;font-size:22px;line-height:16px;margin:-14px -16px 0 0;padding:0;cursor:pointer}ai-dialog>ai-dialog-body{display:block;padding:16px}ai-dialog>ai-dialog-footer{display:block;padding:6px;border-top:1px solid #e5e5e5;text-align:right}ai-dialog>ai-dialog-footer button{color:#333;background-color:#fff;padding:6px 12px;font-size:14px;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid #ccc;border-radius:4px;margin:5px 0 5px 5px}ai-dialog>ai-dialog-footer button:disabled{cursor:default;opacity:.45}ai-dialog>ai-dialog-footer button:hover:enabled{color:#333;background-color:#e6e6e6;border-color:#adadad}.ai-dialog-open{overflow:hidden}";e.DialogConfiguration=function(){function e(e){this.aurelia=e,this.settings=o.dialogOptions,this.resources=[],this.cssText=a,this.renderer=r}return e.prototype.useDefaults=function(){return this.useRenderer(r).useCSS(a).useStandardResources()},e.prototype.useStandardResources=function(){return this.useResource("ai-dialog").useResource("ai-dialog-header").useResource("ai-dialog-body").useResource("ai-dialog-footer").useResource("attach-focus")},e.prototype.useResource=function(e){return this.resources.push(e),this},e.prototype.useRenderer=function(e,t){return this.renderer=e,this.settings=Object.assign(this.settings,t||{}),this},e.prototype.useCSS=function(e){return this.cssText=e,this},e.prototype._apply=function(){var e=this;this.aurelia.transient(t.Renderer,this.renderer),this.resources.forEach(function(t){return e.aurelia.globalResources(s[t])}),this.cssText&&i.DOM.injectStyles(this.cssText)},e}()}),define("aurelia-dialog/renderer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Renderer=function(){function e(){}return e.prototype.getDialogContainer=function(){throw new Error("DialogRenderer must implement getDialogContainer().")},e.prototype.showDialog=function(e){throw new Error("DialogRenderer must implement showDialog().")},e.prototype.hideDialog=function(e){throw new Error("DialogRenderer must implement hideDialog().")},e}()}),define("aurelia-dialog/dialog-renderer",["exports","aurelia-pal","aurelia-dependency-injection"],function(e,t,n){"use strict";function o(e){var n=e.children[0],o=Math.max(t.DOM.querySelectorAll("html")[0].clientHeight,window.innerHeight||0);n.style.marginTop=Math.max((o-n.offsetHeight)/2,30)+"px",n.style.marginBottom=Math.max((o-n.offsetHeight)/2,30)+"px"}Object.defineProperty(e,"__esModule",{value:!0}),e.DialogRenderer=void 0;var i,r,s="ai-dialog-container",a="ai-dialog-overlay",c=function(){var e=null;return function(){if(e)return e;var n=void 0,o=t.DOM.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in i)if(void 0!==o.style[n])return e=i[n]}}(),l=e.DialogRenderer=(i=(0,n.transient)(),i(r=function(){function e(){var e=this;this._escapeKeyEventHandler=function(t){if(27===t.keyCode){var n=e._dialogControllers[e._dialogControllers.length-1];n&&n.settings.lock!==!0&&n.cancel()}}}return e.prototype.getDialogContainer=function(){return t.DOM.createElement("div")},e.prototype.showDialog=function(e){var n=this,i=e.settings,r=t.DOM.querySelectorAll("body")[0],l=document.createElement("div");this.modalOverlay=t.DOM.createElement(a),this.modalContainer=t.DOM.createElement(s),this.anchor=e.slot.anchor,l.appendChild(this.anchor),this.modalContainer.appendChild(l),this.stopPropagation=function(e){e._aureliaDialogHostClicked=!0},this.closeModalClick=function(t){return!i.lock&&!t._aureliaDialogHostClicked&&void e.cancel()},e.centerDialog=function(){i.centerHorizontalOnly||o(n.modalContainer)},this.modalOverlay.style.zIndex=i.startingZIndex,this.modalContainer.style.zIndex=i.startingZIndex;var d=Array.from(r.querySelectorAll(s)).pop();return d?(d.parentNode.insertBefore(this.modalContainer,d.nextSibling),d.parentNode.insertBefore(this.modalOverlay,d.nextSibling)):(r.insertBefore(this.modalContainer,r.firstChild),r.insertBefore(this.modalOverlay,r.firstChild)),this._dialogControllers.length||t.DOM.addEventListener("keyup",this._escapeKeyEventHandler),this._dialogControllers.push(e),e.slot.attached(),"function"==typeof i.position?i.position(this.modalContainer,this.modalOverlay):e.centerDialog(),this.modalContainer.addEventListener("click",this.closeModalClick),this.anchor.addEventListener("click",this.stopPropagation),new Promise(function(e){function t(n){n.target===o.modalContainer&&(o.modalContainer.removeEventListener(c(),t),e())}var o=n;i.ignoreTransitions?e():n.modalContainer.addEventListener(c(),t),n.modalOverlay.classList.add("active"),n.modalContainer.classList.add("active"),r.classList.add("ai-dialog-open")})},e.prototype.hideDialog=function(e){var n=this,o=e.settings,i=t.DOM.querySelectorAll("body")[0];this.modalContainer.removeEventListener("click",this.closeModalClick),this.anchor.removeEventListener("click",this.stopPropagation);var r=this._dialogControllers.indexOf(e);return r!==-1&&this._dialogControllers.splice(r,1),this._dialogControllers.length||t.DOM.removeEventListener("keyup",this._escapeKeyEventHandler),new Promise(function(e){function t(){i.modalContainer.removeEventListener(c(),t),e()}var i=n;o.ignoreTransitions?e():n.modalContainer.addEventListener(c(),t),n.modalOverlay.classList.remove("active"),n.modalContainer.classList.remove("active")}).then(function(){return i.removeChild(n.modalOverlay),i.removeChild(n.modalContainer),e.slot.detached(),n._dialogControllers.length||i.classList.remove("ai-dialog-open"),Promise.resolve()})},e}())||r);l.prototype._dialogControllers=[]}),define("aurelia-dialog/dialog-options",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.dialogOptions={lock:!0,centerHorizontalOnly:!1,startingZIndex:1e3,ignoreTransitions:!1}}),define("aurelia-dialog/dialog-service",["exports","aurelia-metadata","aurelia-dependency-injection","aurelia-templating","./dialog-controller","./renderer","./lifecycle","./dialog-result","./dialog-options"],function(e,t,n,o,i,r,s,a,c){"use strict";function l(e){return e=Object.assign({},c.dialogOptions,e),e.startingZIndex=c.dialogOptions.startingZIndex,e}function d(e,t,n){var i=n.renderer.getDialogContainer(),r={container:e.container,childContainer:t,model:n.settings.model,view:n.settings.view,viewModel:n.settings.viewModel,viewSlot:new o.ViewSlot(i,!0),host:i};return u(r,e.compositionEngine).then(function(t){return n.viewModel=t.viewModel,n.slot=t.viewSlot,(0,s.invokeLifecycle)(n.viewModel,"canActivate",n.settings.model).then(function(o){if(o)return e.compositionEngine.compose(t).then(function(t){return e.controllers.push(n),e.hasActiveDialog=!!e.controllers.length,n.controller=t,n.view=t.view,n.renderer.showDialog(n)})})})}function u(e,n){return"function"==typeof e.viewModel&&(e.viewModel=t.Origin.get(e.viewModel).moduleId),"string"==typeof e.viewModel?n.ensureViewModel(e):Promise.resolve(e)}function p(e,t){var n=e.controllers.indexOf(t);n!==-1&&(e.controllers.splice(n,1),e.hasActiveDialog=!!e.controllers.length)}Object.defineProperty(e,"__esModule",{value:!0}),e.DialogService=void 0;var f,h;e.DialogService=(h=f=function(){function e(e,t){this.container=e,this.compositionEngine=t,this.controllers=[],this.hasActiveDialog=!1}return e.prototype.open=function(e){return this.openAndYieldController(e).then(function(e){return e.result})},e.prototype.openAndYieldController=function(e){var t=this,n=this.container.createChild(),o=void 0,s=new Promise(function(t,s){o=new i.DialogController(n.get(r.Renderer),l(e),t,s)});return n.registerInstance(i.DialogController,o),o.result=s,o.result.then(function(){p(t,o)},function(){p(t,o)}),d(this,n,o).then(function(){return o})},e}(),f.inject=[n.Container,o.CompositionEngine],h)}),define("text!resources/views/app.html",["module"],function(e){e.exports='<template>\n  <require from="styles/styles.css"></require>\n  <require from="./controls/nav-bar"></require>\n\n  <nav-bar router.bind="router"></nav-bar>\n\n  <div class="ui main container">\n    <router-view></router-view>\n  </div>\n</template>\n'}),define("text!styles/customer-list.css",["module"],function(e){e.exports="#customer-list .ui.header {\n  margin-bottom: 0;\n}\n"}),define("text!resources/views/login.html",["module"],function(e){e.exports='<template>\n  <require from="styles/login.css"></require>\n  <div class="login-form ui middle aligned center aligned grid">\n    <div class="column">\n      <h2 class="ui blue image header">\n        <img src="/images/logo.png" class="image">\n        Langendoen Mechanical Job Management Site\n      </h2>\n      <form class="ui large form ${errorMessage ? \'error\' : \'\'}" submit.trigger="login($event)" method="post"\n            novalidate>\n        <div class="ui stacked segment">\n          <div class="field">\n            <div class="ui left icon input">\n              <i class="user icon"></i>\n              <input id="username" name="username" type="text" value.bind="username" placeholder="User Name" required>\n            </div>\n          </div>\n          <div class="field">\n            <div class="ui left icon input">\n              <i class="lock icon"></i>\n              <input id="password" name="password" type="password" value.bind="password" placeholder="Password"\n                     required>\n            </div>\n          </div>\n          <input class="ui fluid large blue submit button" type="submit" value="Login" submit.trigger="cancel($event)">\n          <div class="ui error message" show.bind="errorMessage">\n            <ul class="list">\n              <li>\n                ${errorMessage}\n              </li>\n            </ul>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n'}),define("text!styles/edit-customer-dialog.css",["module"],function(e){e.exports="form[name=edit-customer-dialog] {\n  min-width: 500px;\n}\n"}),define("text!resources/views/controls/nav-bar.html",["module"],function(e){e.exports='<template>\n    <div id="main-menu" class="ui inverted segment">\n        <div class="ui container">\n            <div class="ui large secondary inverted pointing menu">\n                <a href="#" class="item logo-item">\n                    <img src="images/logo.png" alt="Logo" class="logo">\n                    <span>Langendoen Mechanical</span>\n                </a>\n                <a repeat.for="item of router.navigation" href.bind="item.href" class="item ${item.isActive ? \'active\' : \'\'} ${item.settings.hideMobile ? \'hide-mobile\' : \'\'}">\n                    <i if.bind="item.settings.icon" class="icon ${item.settings.icon}"></i>\n                    ${item.title}\n                </a>\n                <a class="item hide-mobile" click.delegate="downloadCsv()">\n                  <i class="cloud download icon"></i>\n                  Export\n                </a>\n                <div class="ui right dropdown item">\n                    ${userName}\n                    <i class="dropdown icon"></i>\n                    <div class="menu">\n                        <button class="item" click.trigger="logout()">Logout</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n'}),define("text!styles/job-detail.css",["module"],function(e){e.exports="@media only screen and (max-width: 767px) {\n  .ui.form .field select.compact,\n  .ui.form .field > .selection.dropdown.compact,\n  .ui.form .fields .field .ui.input.compact {\n    width: 200px;\n  }\n}\n"}),define("text!resources/views/controls/prompt.html",["module"],function(e){e.exports='<template>\n  <ai-dialog>\n    <ai-dialog-body>\n      <p>${message}</p>\n    </ai-dialog-body>\n\n    <ai-dialog-footer>\n      <button click.trigger="controller.cancel()" class="ui button basic">No</button>\n      <button click.trigger="controller.ok()" class="ui button primary">Yes</button>\n    </ai-dialog-footer>\n  </ai-dialog>\n</template>\n'}),define("text!styles/job-list.css",["module"],function(e){e.exports=".ui.cards {\n  padding-top: 10px;\n}\n@media only screen and (min-width: 1200px) {\n  .ui.container.main {\n    width: calc(100% -  50px);\n  }\n}\n"}),define("text!resources/views/customers/edit.html",["module"],function(e){e.exports='<template>\n  <require from="styles/edit-customer-dialog.css"></require>\n  <ai-dialog>\n    <ai-dialog-body>\n      <form name="edit-customer-dialog" class="ui form">\n        <div class="field">\n          <label for="name">Name:</label>\n          <input type="text" id="name" placeholder="ABC Greenhouses" value.bind="customer.name" attach-focus="true" required>\n        </div>\n        <h4 class="ui dividing header">Address Information</h4>\n        <div class="two fields">\n          <div class="field">\n            <label for="address">Address:</label>\n            <input type="text" id="address" placeholder="123 Main St." value.bind="customer.address">\n          </div>\n          <div class="field">\n            <label for="city">City:</label>\n            <input type="text" id="city" placeholder="Vineland" value.bind="customer.city">\n          </div>\n        </div>\n        <div class="two fields">\n          <div class="field">\n            <label for="province">Province:</label>\n            <input type="text" id="province" placeholder="ON" value.bind="customer.province">\n          </div>\n          <div class="field">\n            <label for="postal-code">Postal Code:</label>\n            <input type="text" id="postal-code" placeholder="L0R 2A3" value.bind="customer.postal_code">\n          </div>\n        </div>\n        <h4 class="ui dividing header">Contact Information</h4>\n        <div class="two fields">\n          <div class="field">\n            <label for="contact">Contact Name:</label>\n            <input type="text" id="contact" placeholder="John Doe" value.bind="customer.contact">\n          </div>\n          <div class="field">\n            <label for="phone">Phone:</label>\n            <input type="tel" id="phone" placeholder="905 555 1234" value.bind="customer.phone">\n          </div>\n        </div>\n      </form>\n    </ai-dialog-body>\n\n    <ai-dialog-footer>\n      <button click.trigger="controller.cancel()" class="ui button basic">Cancel</button>\n      <button click.trigger="save()" class="ui button primary">Save</button>\n    </ai-dialog-footer>\n  </ai-dialog>\n</template>\n';
}),define("text!styles/login.css",["module"],function(e){e.exports="@import '../../node_modules/semantic-ui-css/semantic.css';\n.login-form {\n  height: 100%;\n  background-color: #DADADA;\n}\n.login-form > .column {\n  background-color: #ffffff;\n  max-width: 450px;\n}\n.login-form .ui.error.message ul {\n  list-style: none;\n}\n.login-form .ui.error.message ul li:before {\n  content: \"\";\n}\n"}),define("text!resources/views/customers/list.html",["module"],function(e){e.exports='<template>\n  <require from="styles/customer-list.css"></require>\n\n  <div class="ui segment" id="customer-list">\n    <div class="ui grid">\n      <h2 class="ui header six wide column">\n        <i class="circular building outline icon"></i>\n        <div class="content">\n          Customer List\n        </div>\n      </h2>\n      <div class="ten wide column">\n        <div class="ui fluid icon input">\n          <input type="search" name="search" placeholder="Search..." value.bind="search & debounce" autofocus>\n          <i class="search icon"></i>\n        </div>\n      </div>\n    </div>\n    <div class="ui divider"></div>\n    <div class="ui special cards">\n      <div class="ui card" href="#/${c._id}" repeat.for="c of customers">\n        <div class="content">\n          <div class="header">${c.name}</div>\n          <div class="description">\n            <p><strong>Address:</strong>&nbsp;${c.address}</p>\n            <p><strong>City:</strong>&nbsp;${c.city}</p>\n            <p><strong>Province:</strong>&nbsp;${c.province}</p>\n            <p class="divider"><strong>Postal Code:</strong>&nbsp;${c.postal_code}</p>\n            <p><strong>Contact:</strong>&nbsp;${c.contact}</p>\n            <p><strong>Phone:</strong>&nbsp;${c.phone}</p>\n          </div>\n        </div>\n        <div class="extra content">\n          <div class="ui two buttons">\n            <button type="button" class="small ui red basic button" click.delegate="delete(c)">\n              <i class="icon trash"></i>\n              Delete\n            </button>\n            <button type="button" class="small ui grey basic button" click.delegate="edit(c)">\n              <i class="icon edit"></i>\n              Edit\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'}),define("text!resources/views/jobs/close-job.html",["module"],function(e){e.exports='<template>\r\n    <form class="ui big form small modal close-job">\r\n        <i class="close icon"></i>\r\n        <div class="header">Close Job</div>\r\n        <div class="content">\r\n            <div class="description">\r\n                <p>Enter the man-hours for the job</p>\r\n                <input type="number" placeholder="Man Hours" value.bind="args.manHours">\r\n            </div>\r\n        </div>\r\n        <div class="actions">\r\n            <button class="ui button cancel">Cancel</button>\r\n            <button class="ui button positive">OK</button>\r\n        </div>\r\n    </form>\r\n</template>'}),define("text!styles/styles.css",["module"],function(e){e.exports='@import \'../../node_modules/semantic-ui-css/semantic.css\';\n@import \'../../node_modules/semantic-ui/dist/components/calendar.css\';\n.toast-title {\n  font-weight: bold;\n}\n.toast-message {\n  -ms-word-wrap: break-word;\n  word-wrap: break-word;\n}\n.toast-message a,\n.toast-message label {\n  color: #FFFFFF;\n}\n.toast-message a:hover {\n  color: #CCCCCC;\n  text-decoration: none;\n}\n.toast-close-button {\n  position: relative;\n  right: -0.3em;\n  top: -0.3em;\n  float: right;\n  font-size: 20px;\n  font-weight: bold;\n  color: #FFFFFF;\n  -webkit-text-shadow: 0 1px 0 #ffffff;\n  text-shadow: 0 1px 0 #ffffff;\n  opacity: 0.8;\n  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);\n  filter: alpha(opacity=80);\n}\n.toast-close-button:hover,\n.toast-close-button:focus {\n  color: #000000;\n  text-decoration: none;\n  cursor: pointer;\n  opacity: 0.4;\n  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);\n  filter: alpha(opacity=40);\n}\n/*Additional properties for button version\n iOS requires the button element instead of an anchor tag.\n If you want the anchor version, it requires `href="#"`.*/\nbutton.toast-close-button {\n  padding: 0;\n  cursor: pointer;\n  background: transparent;\n  border: 0;\n  -webkit-appearance: none;\n}\n.toast-top-center {\n  top: 0;\n  right: 0;\n  width: 100%;\n}\n.toast-bottom-center {\n  bottom: 0;\n  right: 0;\n  width: 100%;\n}\n.toast-top-full-width {\n  top: 0;\n  right: 0;\n  width: 100%;\n}\n.toast-bottom-full-width {\n  bottom: 0;\n  right: 0;\n  width: 100%;\n}\n.toast-top-left {\n  top: 12px;\n  left: 12px;\n}\n.toast-top-right {\n  top: 12px;\n  right: 12px;\n}\n.toast-bottom-right {\n  right: 12px;\n  bottom: 12px;\n}\n.toast-bottom-left {\n  bottom: 12px;\n  left: 12px;\n}\n#toast-container {\n  position: fixed;\n  z-index: 999999;\n  pointer-events: none;\n  /*overrides*/\n}\n#toast-container * {\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n#toast-container > div {\n  position: relative;\n  pointer-events: auto;\n  overflow: hidden;\n  margin: 0 0 6px;\n  padding: 15px 15px 15px 50px;\n  width: 300px;\n  -moz-border-radius: 3px 3px 3px 3px;\n  -webkit-border-radius: 3px 3px 3px 3px;\n  border-radius: 3px 3px 3px 3px;\n  background-position: 15px center;\n  background-repeat: no-repeat;\n  -moz-box-shadow: 0 0 12px #999999;\n  -webkit-box-shadow: 0 0 12px #999999;\n  box-shadow: 0 0 12px #999999;\n  color: #FFFFFF;\n  opacity: 0.8;\n  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=80);\n  filter: alpha(opacity=80);\n}\n#toast-container > :hover {\n  -moz-box-shadow: 0 0 12px #000000;\n  -webkit-box-shadow: 0 0 12px #000000;\n  box-shadow: 0 0 12px #000000;\n  opacity: 1;\n  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);\n  filter: alpha(opacity=100);\n  cursor: pointer;\n}\n#toast-container > .toast-info {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVEhLtZa9SgNBEMc9sUxxRcoUKSzSWIhXpFMhhYWFhaBg4yPYiWCXZxBLERsLRS3EQkEfwCKdjWJAwSKCgoKCcudv4O5YLrt7EzgXhiU3/4+b2ckmwVjJSpKkQ6wAi4gwhT+z3wRBcEz0yjSseUTrcRyfsHsXmD0AmbHOC9Ii8VImnuXBPglHpQ5wwSVM7sNnTG7Za4JwDdCjxyAiH3nyA2mtaTJufiDZ5dCaqlItILh1NHatfN5skvjx9Z38m69CgzuXmZgVrPIGE763Jx9qKsRozWYw6xOHdER+nn2KkO+Bb+UV5CBN6WC6QtBgbRVozrahAbmm6HtUsgtPC19tFdxXZYBOfkbmFJ1VaHA1VAHjd0pp70oTZzvR+EVrx2Ygfdsq6eu55BHYR8hlcki+n+kERUFG8BrA0BwjeAv2M8WLQBtcy+SD6fNsmnB3AlBLrgTtVW1c2QN4bVWLATaIS60J2Du5y1TiJgjSBvFVZgTmwCU+dAZFoPxGEEs8nyHC9Bwe2GvEJv2WXZb0vjdyFT4Cxk3e/kIqlOGoVLwwPevpYHT+00T+hWwXDf4AJAOUqWcDhbwAAAAASUVORK5CYII=") !important;\n}\n#toast-container > .toast-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHOSURBVEhLrZa/SgNBEMZzh0WKCClSCKaIYOED+AAKeQQLG8HWztLCImBrYadgIdY+gIKNYkBFSwu7CAoqCgkkoGBI/E28PdbLZmeDLgzZzcx83/zZ2SSXC1j9fr+I1Hq93g2yxH4iwM1vkoBWAdxCmpzTxfkN2RcyZNaHFIkSo10+8kgxkXIURV5HGxTmFuc75B2RfQkpxHG8aAgaAFa0tAHqYFfQ7Iwe2yhODk8+J4C7yAoRTWI3w/4klGRgR4lO7Rpn9+gvMyWp+uxFh8+H+ARlgN1nJuJuQAYvNkEnwGFck18Er4q3egEc/oO+mhLdKgRyhdNFiacC0rlOCbhNVz4H9FnAYgDBvU3QIioZlJFLJtsoHYRDfiZoUyIxqCtRpVlANq0EU4dApjrtgezPFad5S19Wgjkc0hNVnuF4HjVA6C7QrSIbylB+oZe3aHgBsqlNqKYH48jXyJKMuAbiyVJ8KzaB3eRc0pg9VwQ4niFryI68qiOi3AbjwdsfnAtk0bCjTLJKr6mrD9g8iq/S/B81hguOMlQTnVyG40wAcjnmgsCNESDrjme7wfftP4P7SP4N3CJZdvzoNyGq2c/HWOXJGsvVg+RA/k2MC/wN6I2YA2Pt8GkAAAAASUVORK5CYII=") !important;\n}\n#toast-container > .toast-success {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADsSURBVEhLY2AYBfQMgf///3P8+/evAIgvA/FsIF+BavYDDWMBGroaSMMBiE8VC7AZDrIFaMFnii3AZTjUgsUUWUDA8OdAH6iQbQEhw4HyGsPEcKBXBIC4ARhex4G4BsjmweU1soIFaGg/WtoFZRIZdEvIMhxkCCjXIVsATV6gFGACs4Rsw0EGgIIH3QJYJgHSARQZDrWAB+jawzgs+Q2UO49D7jnRSRGoEFRILcdmEMWGI0cm0JJ2QpYA1RDvcmzJEWhABhD/pqrL0S0CWuABKgnRki9lLseS7g2AlqwHWQSKH4oKLrILpRGhEQCw2LiRUIa4lwAAAABJRU5ErkJggg==") !important;\n}\n#toast-container > .toast-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGYSURBVEhL5ZSvTsNQFMbXZGICMYGYmJhAQIJAICYQPAACiSDB8AiICQQJT4CqQEwgJvYASAQCiZiYmJhAIBATCARJy+9rTsldd8sKu1M0+dLb057v6/lbq/2rK0mS/TRNj9cWNAKPYIJII7gIxCcQ51cvqID+GIEX8ASG4B1bK5gIZFeQfoJdEXOfgX4QAQg7kH2A65yQ87lyxb27sggkAzAuFhbbg1K2kgCkB1bVwyIR9m2L7PRPIhDUIXgGtyKw575yz3lTNs6X4JXnjV+LKM/m3MydnTbtOKIjtz6VhCBq4vSm3ncdrD2lk0VgUXSVKjVDJXJzijW1RQdsU7F77He8u68koNZTz8Oz5yGa6J3H3lZ0xYgXBK2QymlWWA+RWnYhskLBv2vmE+hBMCtbA7KX5drWyRT/2JsqZ2IvfB9Y4bWDNMFbJRFmC9E74SoS0CqulwjkC0+5bpcV1CZ8NMej4pjy0U+doDQsGyo1hzVJttIjhQ7GnBtRFN1UarUlH8F3xict+HY07rEzoUGPlWcjRFRr4/gChZgc3ZL2d8oAAAAASUVORK5CYII=") !important;\n}\n#toast-container.toast-top-center > div,\n#toast-container.toast-bottom-center > div {\n  width: 300px;\n  margin-left: auto;\n  margin-right: auto;\n}\n#toast-container.toast-top-full-width > div,\n#toast-container.toast-bottom-full-width > div {\n  width: 96%;\n  margin-left: auto;\n  margin-right: auto;\n}\n.toast {\n  background-color: #030303;\n}\n.toast-success {\n  background-color: #51A351;\n}\n.toast-error {\n  background-color: #BD362F;\n}\n.toast-info {\n  background-color: #2F96B4;\n}\n.toast-warning {\n  background-color: #F89406;\n}\n.toast-progress {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  height: 4px;\n  background-color: #000000;\n  opacity: 0.4;\n  -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);\n  filter: alpha(opacity=40);\n}\n/*Responsive Design*/\n@media all and (max-width: 240px) {\n  #toast-container > div {\n    padding: 8px 8px 8px 50px;\n    width: 11em;\n  }\n  #toast-container .toast-close-button {\n    right: -0.2em;\n    top: -0.2em;\n  }\n}\n@media all and (min-width: 241px) and (max-width: 480px) {\n  #toast-container > div {\n    padding: 8px 8px 8px 50px;\n    width: 18em;\n  }\n  #toast-container .toast-close-button {\n    right: -0.2em;\n    top: -0.2em;\n  }\n}\n@media all and (min-width: 481px) and (max-width: 768px) {\n  #toast-container > div {\n    padding: 15px 15px 15px 50px;\n    width: 25em;\n  }\n}\n.ui.secondary.pointing.menu .item.logo-item {\n  padding: 0 20px;\n}\n.ui.fixed.menu.button-bar.top {\n  top: 0px;\n}\n.ui.popup.calendar:focus {\n  outline: none;\n}\n@media only screen and (max-width: 767px) {\n  #main-menu > .ui.container {\n    margin: 0px !important;\n  }\n  list-item {\n    width: 100%;\n  }\n  list-item > .ui.card {\n    width: 100%;\n  }\n  list-item > .ui.card .ui.header {\n    margin-top: 10px;\n  }\n  .menu .item.logo-item span {\n    display: none;\n  }\n  .ui.cards > .card {\n    width: 100%;\n  }\n  .hide-mobile {\n    display: none !important;\n  }\n}\n@media only screen and (min-width: 768px) {\n  .hide-desktop {\n    display: none !important;\n  }\n}\n'}),define("text!resources/views/jobs/detail.html",["module"],function(e){e.exports='<template>\n  <require from="styles/job-detail.css"></require>\n  <require from="../controls/integer-value-converter"></require>\n\n    <div class="ui menu button-bar">\n        <div class="ui container">\n            <a route-href="route:jobs.list" class="ui button">Cancel</a>\n            <button type="button" class="ui button positive" click.trigger="onSaveClick()">\n                <i class="icon save"></i>\n                Save\n            </button>\n\n            <button type="button" class="ui button red basic right" click.trigger="onDeleteClick()" show.bind="job._id">\n              <i class="icon trash"></i>\n              Delete\n            </button>\n        </div>\n    </div>\n\n    <form class="ui form">\n        <h2 class="ui ${isFollowup ? \'\' : \'dividing header\'}">${routeConfig.title}</h2>\n\n        <div class="fields">\n            <div class="field eight wide">\n                <label for="customer">Customer</label>\n                <div class="ui search selection dropdown customer">\n                    <input type="hidden" name="customer" id="customer" value.bind="customer_id">\n                    <i class="dropdown icon"></i>\n                    <div class="default text">Select Customer</div>\n                    <div class="menu">\n                        <div repeat.for="customer of customers" class="item" data-value.bind="customer._id" data-text.bind="customer.name">\n                            ${customer.name}\n                        </div>\n                    </div>\n                </div>\n            </div>\n          <div class="field eight wide">\n            <label for="job-name">Job Name</label>\n            <input type="text" name="job-name" id="job-name" value.bind="job.name">\n          </div>\n        </div>\n        <div class="fields">\n            <div class="field sixteen wide">\n                <label for="description">Job Description</label>\n                <textarea name="description" id="description" value.bind="job.description" cols="30" rows="5"></textarea>\n            </div>\n        </div>\n        <div class="fields">\n            <div class="field six wide">\n                <label for="jobType">Job Type</label>\n                <select name="jobType" id="jobType" value.bind="job.job_type" class="ui compact dropdown">\n                    <option repeat.for="t of jobTypes" value="${t.id}">${t.name}</option>\n                </select>\n            </div>\n        </div>\n        <div class="fields">\n            <div class="field six wide">\n                <label for="status">Status</label>\n                <select name="status" id="status" value.bind="job.status" class="ui compact dropdown">\n                    <option repeat.for="s of jobStatuses" value="${s.id}">${s.name}</option>\n                </select>\n            </div>\n            <div class="field six wide">\n                <label for="billingType">Billing Type</label>\n                <select name="billingType" id="billingType" value.bind="job.billing_type" class="ui compact dropdown">\n                    <option repeat.for="bt of billingTypes" value="${bt.id}">${bt.name}</option>\n                </select>\n            </div>\n            <div class="field six wide">\n                <label for="jobType">Work Type</label>\n                <select name="workType" id="workType" value.bind="job.work_type" class="ui compact dropdown">\n                    <option repeat.for="wt of workTypes" value="${wt.id}">${wt.name}</option>\n                </select>\n            </div>\n        </div>\n        <div class="fields">\n            <div class="field six wide">\n                <label for="start">Scheduled Start</label>\n                <div class="ui calendar start">\n                    <div class="ui input compact left icon">\n                        <i class="calendar icon"></i>\n                        <input type="text" placeholder="Date/Time" id="start" name="start">\n                    </div>\n                </div>\n            </div>\n          <div class="field six wide">\n            <label for="start">Scheduled End</label>\n            <div class="ui calendar end">\n              <div class="ui input compact left icon">\n                <i class="calendar icon"></i>\n                <input type="text" placeholder="Date/Time" id="end" name="end">\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="fields">\n            <div class="field sixteen wide">\n                <label for="notes">Notes</label>\n                <textarea name="notes" id="notes" value.bind="job.notes" cols="30" rows="3"></textarea>\n            </div>\n        </div>\n        <div class="fields">\n          <div class="field six wide">\n            <label for="man-hours">Man-hours:</label>\n            <input type="number" id="man-hours" name="man-hours" value.bind="job.manHours | integer" if.bind="canEditManHours">\n            <input type="number" id="man-hours-readonly" name="man-hours-readonly" value.bind="job.manHours | integer" if.bind="!canEditManHours" readonly>\n          </div>\n        </div>\n    </form>\n</template>\n'}),define("text!resources/views/jobs/list-item.html",["module"],function(e){e.exports='<template>\n      <div class="content">\n          <div class="right floated meta" style="max-width: 40%;">\n              <span>${startDateDisplay}</span>\n              <span show.bind="job.endDate">&nbsp;&ndash;&nbsp;</span>\n              <br show.bind="job.endDate">\n              <span show.bind="job.endDate">${endDateDisplay}</span>\n          </div>\n          <a class="header" route-href="route:jobs.edit; params.bind: {id: job._id}">\n              <i class="icon building" show.bind="isProject"></i>\n              <i class="icon wrench" show.bind="isServiceCall"></i>\n              &nbsp;${jobNumberDisplay}\n          </a>\n          <div class="ui header">${job.customer.name}</div>\n      </div>\n      <div class="content">\n          <div class="ui sub header">\n              <button class="ui basic icon button right floated hide-desktop" click.trigger="toggleExpanded()">\n                  <i class="dropdown icon ${expanded ? \'vertically flipped\' : \'\'}"></i>\n              </button>\n              ${job.name}\n          </div>\n          <p class="ui ${expanded ? \'\' : \'hide-mobile\'}">${job.description}</p>\n          <div class="ui sub header ${expanded ? \'\' : \'hide-mobile\'}" show.bind="job.manHours">Man hours: ${job.manHours}</div>\n      </div>\n      <div class="ui extra content ${expanded ? \'\' : \'hide-mobile\'}">\n          <div class="right floated author">\n              <div class="ui dropdown foreman">\n                  <div class="text">\n                      <i class="icon user" show.bind="job.foreman"></i>\n                      <i class="icon user plus" hide.bind="job.foreman"></i>\n                      &nbsp;${foremanDisplay}\n                  </div>\n                  <i class="dropdown icon"></i>\n                  <div class="menu">\n                      <div repeat.for="f of foremen" class="item" data-value.bind="f">${f}</div>\n                  </div>\n              </div>\n          </div>\n          <div class="ui dropdown status">\n              <div class="text">\n                  <i class="icon circular ${jobStatus.cssClass}"></i>\n                  <span>&nbsp;${jobStatus.name}</span>\n              </div>\n              <i class="dropdown icon"></i>\n              <div class="menu">\n                  <div class="item" repeat.for="status of jobStatuses" data-value.bind="status.id">\n                      <i class="icon circular ${status.cssClass}"></i>\n                      <span>&nbsp;${status.name}</span>\n                  </div>\n              </div>\n          </div>\n      </div>\n</template>\n'}),define("text!resources/views/jobs/list.html",["module"],function(e){e.exports='<template>\n  <require from="./list-item"></require>\n  <require from="./close-job"></require>\n\n  <require from="styles/job-list.css"></require>\n\n  <div class="ui segment">\n    <button class="ui button basic right floated hide-desktop mini" click.trigger="toggleFiltersExpanded()"\n            show.bind="isOwner">\n      Filters\n      <i class="dropdown icon ${filtersExpanded ? \'vertically flipped\' : \'\'}"></i>\n    </button>\n    <div class="ui two column grid stackable container ${filtersExpanded ? \'\' : \'hide-mobile\'}" show.bind="isOwner">\n      <div class="column">\n        <div class="ui toggle checkbox">\n          <input type="checkbox" checked.bind="myJobs">\n          <label>My Jobs Only</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="showOpen">\n          <label>Show open jobs</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="showCompleted">\n          <label>Show completed jobs</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="showClosed">\n          <label>Show closed jobs</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="customerSort">\n          <label>Customer Sort</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="reverseSort">\n          <label>Reverse Sort</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="showProjects">\n          <label>Show Projects</label>\n        </div>\n      </div>\n      <div class="column">\n        <div class="ui toggle checkbox column">\n          <input type="checkbox" checked.bind="showServiceCalls">\n          <label>Show Service Calls</label>\n        </div>\n      </div>      \n    </div>\n\n    <div class="ui cards" show.bind="filteredItems.length">\n      <list-item job.bind="item" repeat.for="item of filteredItems" class="card"></list-item>\n    </div>\n    <div class="ui message" show.bind="!filteredItems.length">\n      <div class="header">No items</div>\n    </div>\n  </div>\n\n  <close-job id="close-job" args.bind="closeJobArgs"></close-job>\n</template>\n'});